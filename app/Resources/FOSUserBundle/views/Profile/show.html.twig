{% extends "@FOSUser/layout.html.twig" %}

{% trans_default_domain 'FOSUserBundle' %}

{% block fos_user_content %}

    <div class="container fos_user_user_show">

        <div class="col-lg-12 col-sm-12">
            <div class="card hovercard">
                <div class="card-background">
                    <img class="card-bkimg" alt="" src="#">
                </div>
                <div class="useravatar">
                    <img alt="{{ user.picture.name }}" src="{{ asset('uploads/' ~ user.picture.name) }}">
                </div>
                <div class="card-info"><span class="card-title">{{ user.firstname }} {{ user.name }}</span>

                </div>
            </div>
            <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button type="button" id="stars" class="btn btn-primary" href="#tab1" data-toggle="tab"><span
                                class="glyphicon glyphicon-star" aria-hidden="true"></span>
                        <div class="hidden-xs">MON PROFIL</div>
                    </button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="favorites" class="btn btn-default" href="#tab2" data-toggle="tab"><span
                                class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                        <div class="hidden-xs">MES ANNONCES</div>
                    </button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="following" class="btn btn-default" href="#tab3" data-toggle="tab"><span
                                class="glyphicon glyphicon-user" aria-hidden="true"></span>
                        <div class="hidden-xs">MA MESSAGERIE</div>
                    </button>
                </div>
            </div>

            <div class="well">
                <div class="tab-content">
                    <div class="tab-pane fade in active" id="tab1">
                        <h3>Voir et modifier mon profil</h3>
                        <p><span class="bold">PRÉNOM :</span> {{ user.firstname }}</p>
                        <p><span class="bold">NOM :</span> {{ user.name }}</p>
                        <p><span class="bold">EMAIL :</span> {{ user.email }}</p>
                        <p><span class="bold">TÉLÉPHONE :</span> {{ user.phone }}</p>
                        <p><span class="bold">DESCRIPTION :</span> {{ user.description }}</p>
                        <a href="{{ path('fos_user_profile_edit') }}">
                            <button class="btn btn-primary">Modifier mon profil</button>
                        </a>
                    </div>
                    <div class="tab-pane fade in" id="tab2">
                        <h3>Mes annonces</h3>
                        {% if user.adverts is defined %}
                            {% for advert in user.adverts %}
                                <div class="card" style="width: 20rem;">
                                    {% for picture in advert.pictures %}
                                        <img src="{{ asset('uploads/'~picture.name) }}" alt="{{ advert.title }}"
                                             class="">
                                    {% endfor %}
                                    <div class="card-block">
                                        <h4 class="card-title">{{ advert.title }}</h4>
                                        <p class="card-text">{{ advert.type }}</p>
                                        <p class="card-text">{{ advert.city }}</p>
                                        <a href="{{ path('advert_edit', { 'id': advert.id }) }}"
                                           class="btn btn-primary">Modifier mon annonce</a>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <p>Vous n'avez pas encore d'annonce</p>
                        {% endif %}
                    </div>

                    <div class="tab-pane fade in" id="tab3">
                        <h3>Mes messages</h3>
                    </div>
                </div>
            </div>

        </div>

    </div>

{% endblock fos_user_content %}

{% block javascripts %}

    <script>
        $(document).ready(function () {
            $(".btn-pref .btn").click(function () {
                $(".btn-pref .btn").removeClass("btn-primary").addClass("btn-default");
                // $(".tab").addClass("active"); // instead of this do the below
                $(this).removeClass("btn-default").addClass("btn-primary");
            });
        });
    </script>

{% endblock %}
